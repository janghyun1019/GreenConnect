<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Cart_mapper">

    <!-- 장바구니 항목 조회 -->
    <select id="getCartItems" parameterType="String" resultType="Cart">
        SELECT 
            user_id AS userId,
            post_id AS postId,
            title,
            count,
            price,
            image_url AS imageUrl
        FROM 
            cart
        WHERE 
            user_id = #{userId}
    </select>

    <!-- 장바구니 항목 수량 업데이트 -->
    <update id="updateCartItemQuantity">
        UPDATE cart
        SET count = #{count}
        WHERE user_id = #{userId} AND post_id = #{postId}
    </update>
    
    <!-- 장바구니에서 항목 제거 -->
    <delete id="removeCartItem">
        DELETE FROM cart
        WHERE user_id = #{userId} AND post_id = #{postId}
    </delete>
    
    <!-- 장바구니 비우기 -->
    <delete id="clearCart" parameterType="String">
        DELETE FROM cart
        WHERE user_id = #{userId}
    </delete>
    
</mapper>